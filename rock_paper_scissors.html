<html>
<head>
  <title>Page Title</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <script>

function createElem(_elem,_textcontent,_class) {
 // alert("fonction CreateElem appelée");
  for (j=0;j<arguments.length;j++)
  if (typeof arguments[j]!='string')
  arguments[j]="";
//alert(a);
  let a=document.createElement(_elem);
 // alert(a);
  let text=document.createTextNode(_textcontent);
  a.appendChild(text);
  a.classList.add(_class);
return a;
}

function computerPlay() {

  let hand=Math.random()*3;
  if (hand>=2) {
    //alert("r");
    return "Rock";
  }
  else if (hand>=1)  {
    //alert ("p");
    return "Paper";

  }
  else {
   // alert("s");
    return "Scissors";

  }
} 
function transfo (n){
  console.log(n.toLowerCase());
    if (n.toLowerCase()=='rock') {
    //console.log("r");
      return 3; }
    else if (n.toLowerCase()=='paper') {
      //console.log("p");
      return 2; }
    else if (n.toLowerCase()=='scissors') {
     // console.log("p");
      return 1; }
    else return -1;
}

function winOrLose(player,ai){
  player=transfo(player); ai=transfo(ai);
  console.log("round: player=" + player + " and Machine=" + ai);
if (player===-1) return null;
else if (player===ai) return 0;
else if ((player<ai)&&!((player===1)&&(ai===3))||((player===3)&&(ai===1))) { console.log("je suis rentré   " + (player<ai) + "   " + player + "=" + ai); return 1; }
else return -1;
}
//rock > paper > scissors
function roundMessage(result) {
  if (result===1) return "The player wins";
else if (result===-1) return 'Skynet ever lives';
else if (result===0) return 'No winner this round';
else return 'please play the game seriously';

}

function clickRoundEvent(Elem, pick) {
Elem.addEventListener('click', ()=> {
  let _div=document.createElement('div');
  let _result=winOrLose(pick,computerPlay());
_div.textContent=(roundMessage(_result));
body.appendChild(_div);
divScore.textContent="The score is:  Human:" + playerScore + "Machine:" + machineScore;
if (_result===1) playerScore++;
else if (_result===-1) machineScore++;
}
)}

let playerScore=0;
let machineScore=0;
let rock, paper,scissors;
let RPS=[,,];
const body=document.querySelector('body');
let _butt= ["Pierre","Papier", "Ciseaux"];
let i;

for (i=0; i<3;i++){
  RPS[i]=createElem('button',_butt[i], "RPS"+i)
  body.appendChild(RPS[i]);
}
let divScore=document.createElement('div');
divScore.textContent="The score is:  Human: " + playerScore + "Machine: " + machineScore;
body.appendChild(divScore);



let div=document.createElement('div');
//should use function for clarity
clickRoundEvent(RPS[0],'rock');
clickRoundEvent(RPS[1],'paper');
clickRoundEvent(RPS[2],'scissors');



/*
function game(){
let score=0; let turn=0;
while (turn!=5 && score!=3) {
   let hand=prompt("So, what will you play?") ;

let response=roundMessage(hand,computerPlay());
console.log(response);
turn++;
console.log("turn " + turn);

} 
}
console.log(computerPlay());
console.log(roundMessage(prompt("So, what will you play?") , computerPlay()));
game(); */


</script>
</body>
</html>

